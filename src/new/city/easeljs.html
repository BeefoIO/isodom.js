<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>isodom.js City Example</title>
    <link rel="stylesheet" href="../IsoDom.css">
    <style>
        #container {
            position: relative;
            width: 800px;
            height: 600px;
            border: 2px solid grey;
            overflow: auto;
        }
        .iso-dom {
            transform: rotateX(59.5deg) rotateZ(45deg);
            margin-left: 200px;
        }
    </style>
</head>
<body>

<div id="container">
    <canvas id="isodom"></canvas>
</div>

<p>Assets by: <a href="http://kenney.nl/assets?s=isometric">Kenney.nl</a></p>

<script src="https://code.createjs.com/1.0.0/easeljs.min.js"></script>
<script src="https://code.createjs.com/1.0.0/preloadjs.min.js"></script>
<script src="../IsoDom.js" type="application/javascript"></script>
<script src="../conductors/EaselJs.js" type="application/javascript"></script>
<script>
    var preload = new createjs.LoadQueue();
    preload.addEventListener('complete', () => {

        const conductor = new IsoDomEaselJsConductor({
            target: document.getElementById('isodom'),
            image: preload.getResult('cell'),
            resolve(src) {
                return preload.getResult(src);
            },
        });

        window.iso = new IsoDom(conductor, {
            debug: true,
            columns: 10,
            rows: 10,
            cellSize: [148, 88],
            items: {
                straightRoad: {
                    orientation: IsoDom.ORIENTATION_SW,
                    size: [1,1],
                    images: {
                        [IsoDom.ORIENTATION_NW]: { url: 'cityTiles_073', offset: { top: -36, left: -1 } },
                        [IsoDom.ORIENTATION_NE]: { url: 'cityTiles_081', offset: { top: -36, left: -1} },
                        [IsoDom.ORIENTATION_SE]: { url: 'cityTiles_073', offset: { top: -36, left: -1} },
                        [IsoDom.ORIENTATION_SW]: { url: 'cityTiles_081', offset: { top: -39, left: 0 } },
                    },
                },
                cornerRoad: {
                    orientation: IsoDom.ORIENTATION_SW,
                    size: [1,1],
                    images: {
                        [IsoDom.ORIENTATION_NW]: { url: 'cityTiles_122', offset: { top: -38, left: -1 } },
                        [IsoDom.ORIENTATION_NE]: { url: 'cityTiles_124', offset: { top: -38, left: -1} },
                        [IsoDom.ORIENTATION_SE]: { url: 'cityTiles_126', offset: { top: -38, left: -1} },
                        [IsoDom.ORIENTATION_SW]: { url: 'cityTiles_125', offset: { top: -38, left: -1 } },
                    },
                }
            }
        });

        iso.addItem('straightRoad', 2, 6, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('straightRoad', 2, 5, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('straightRoad', 2, 4, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('straightRoad', 2, 3, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('straightRoad', 2, 2, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('straightRoad', 2, 1, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('cornerRoad', 2, 0, { orientation: IsoDom.ORIENTATION_SW });
        iso.addItem('straightRoad', 1, 0, { orientation: IsoDom.ORIENTATION_NW });
        iso.addItem('straightRoad', 0, 0, { orientation: IsoDom.ORIENTATION_NW });
        iso.addItem('straightRoad', 0, 6, { orientation: IsoDom.ORIENTATION_NW });
        iso.draw();
    });
    preload.loadManifest([
        { src: 'assets/cell.png', id: 'cell' },
        { src: 'assets/isometriccity/PNG/cityTiles_073.png', id: 'cityTiles_073' },
        { src: 'assets/isometriccity/PNG/cityTiles_081.png', id: 'cityTiles_081' },
        { src: 'assets/isometriccity/PNG/cityTiles_073.png', id: 'cityTiles_073' },
        { src: 'assets/isometriccity/PNG/cityTiles_081.png', id: 'cityTiles_081' },
        { src: 'assets/isometriccity/PNG/cityTiles_122.png', id: 'cityTiles_122' },
        { src: 'assets/isometriccity/PNG/cityTiles_124.png', id: 'cityTiles_124' },
        { src: 'assets/isometriccity/PNG/cityTiles_126.png', id: 'cityTiles_126' },
        { src: 'assets/isometriccity/PNG/cityTiles_125.png', id: 'cityTiles_125' },
    ]);
</script>
</body>
</html>
